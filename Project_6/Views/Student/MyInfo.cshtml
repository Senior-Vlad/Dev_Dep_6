@model Project_6.Models.UserInfo
@{
    ViewData["Title"] = "My Information";
}

@if (TempData["Message"] != null)
{
    <div class="alert alert-success text-center" style="margin-top: 50px;">@TempData["Message"]</div>
}

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const element = document.getElementById("editBtn");
            if (element) {
                element.addEventListener("click", enableEdit);
            }

            const cancelBtn = document.getElementById("cancelBtn");
            if (cancelBtn) {
                cancelBtn.addEventListener("click", cancelEdit);
            }
        });

        function enableEdit() {
            const inputs = document.querySelectorAll('.info-form input');
            inputs.forEach(i => i.removeAttribute('readonly'));

            document.getElementById('editBtn').classList.add('d-none');
            document.getElementById('saveBtn').classList.remove('d-none');
            document.getElementById('cancelBtn').classList.remove('d-none');
        }

        function cancelEdit() {
            const inputs = document.querySelectorAll('.info-form input');
            inputs.forEach(i => i.setAttribute('readonly', 'true'));

            document.getElementById('editBtn').classList.remove('d-none');
            document.getElementById('saveBtn').classList.add('d-none');
            document.getElementById('cancelBtn').classList.add('d-none');
        }
    </script>
    </script>
}

<div class="container mt-5" style="max-width: 600px;">
    <h2 class="text-center mb-4" style="color:rgb(125, 125, 235);">My Information</h2>

    @if (Model != null)
    {
        <form asp-action="UpdateStudentInfo" asp-controller="Student" method="post"
            class="bg-light p-4 shadow rounded info-form">
            <input type="hidden" name="Id" value="@Model.Id" />
            <div class="mb-3">
                <label class="form-label">First Name</label>
                <input type="text" class="form-control" name="FirstName" value="@Model.FirstName" readonly />
            </div>

            <div class="mb-3">
                <label class="form-label">Last Name</label>
                <input type="text" class="form-control" name="LastName" value="@Model.LastName" readonly />
            </div>

            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" name="Email" value="@Model.Email" readonly />
            </div>

            <div class="mb-3">
                <label class="form-label">Phone Number</label>
                <input type="text" class="form-control" name="PhoneNumber" value="@Model.PhoneNumber" readonly />
            </div>

            <div class="mb-3">
                <label class="form-label">Year of Study</label>
                <input type="text" class="form-control" name="YearOfStudy" value="@Model.YearOfStudy" readonly />
            </div>

            <div class="mb-3">
                <label class="form-label">Faculty</label>
                <input type="text" class="form-control" name="Faculty" value="@Model.Faculty" readonly />
            </div>

            <div class="mb-3">
                <label class="form-label">Major</label>
                <input type="text" class="form-control" name="Major" value="@Model.Major" readonly />
            </div>

            <div class="text-center">
                <button type="button" class="btn" style="background-color: rgb(125, 125, 235);" id="editBtn"
                    onclick="enableEdit()">Edit</button>
                <button type="submit" class="btn btn-success d-none" id="saveBtn">Save</button>
                <button type="button" class="btn btn-secondary d-none" id="cancelBtn" onclick="cancelEdit()">Cancel</button>
            </div>
        </form>
    }
    else
    {
        <div class="alert alert-warning text-center">
            @ViewBag.Message
        </div>
    }
</div>
